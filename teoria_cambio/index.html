<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Teoría de Cambio - Chingos de Impacto</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos adicionales para íconos */
        .icon { display: inline-block; width: 16px; height: 16px; }
        .icon-lg { width: 20px; height: 20px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // Componentes de íconos simplificados
        const ChevronRight = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
            </svg>
        );

        const ChevronLeft = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
            </svg>
        );

        const Download = ({ size = 16 }) => (
            <svg className={size > 16 ? "icon-lg" : "icon"} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
            </svg>
        );

        const Plus = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
            </svg>
        );

        const Trash2 = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
            </svg>
        );

        const Target = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z" />
            </svg>
        );

        const TrendingUp = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
            </svg>
        );

        const Users = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
        );

        const Clock = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const CheckCircle = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        );

        const Eye = () => (
            <svg className="icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
            </svg>
        );

        // Componente principal
        const TheoryOfChangeGenerator = () => {
            const [currentStep, setCurrentStep] = React.useState(0);
            const [theoryData, setTheoryData] = React.useState({
                problemDefinition: '',
                longTermGoal: '',
                assumptions: [],
                outcomes: {
                    shortTerm: [],
                    mediumTerm: [],
                    longTerm: []
                },
                activities: [],
                inputs: [],
                indicators: [],
                risks: [],
                stakeholders: []
            });

            const [newItem, setNewItem] = React.useState('');

            const steps = [
                {
                    title: "Definición del Problema",
                    icon: Target,
                    description: "Identifica y describe claramente el problema que buscas resolver"
                },
                {
                    title: "Meta a Largo Plazo",
                    icon: TrendingUp,
                    description: "Define el cambio final que quieres lograr"
                },
                {
                    title: "Actores Clave",
                    icon: Users,
                    description: "Identifica los stakeholders y beneficiarios"
                },
                {
                    title: "Resultados Esperados",
                    icon: CheckCircle,
                    description: "Define outcomes de corto, mediano y largo plazo"
                },
                {
                    title: "Actividades e Insumos",
                    icon: Clock,
                    description: "Planifica las acciones y recursos necesarios"
                },
                {
                    title: "Supuestos y Riesgos",
                    icon: Target,
                    description: "Identifica las condiciones críticas para el éxito"
                },
                {
                    title: "Indicadores",
                    icon: Target,
                    description: "Define cómo medirás el progreso y el impacto"
                },
                {
                    title: "Visualización Final",
                    icon: Eye,
                    description: "Revisa tu teoría de cambio completa"
                }
            ];

            const addItem = (field, subField = null, customText = null) => {
                const textToAdd = customText || newItem;
                if (!textToAdd.trim()) return;

                setTheoryData(prev => {
                    const newData = { ...prev };
                    if (subField) {
                        newData[field][subField] = [...newData[field][subField], textToAdd.trim()];
                    } else {
                        newData[field] = [...newData[field], textToAdd.trim()];
                    }
                    return newData;
                });
                if (!customText) setNewItem('');
            };

            const removeItem = (field, index, subField = null) => {
                setTheoryData(prev => {
                    const newData = { ...prev };
                    if (subField) {
                        newData[field][subField] = newData[field][subField].filter((_, i) => i !== index);
                    } else {
                        newData[field] = newData[field].filter((_, i) => i !== index);
                    }
                    return newData;
                });
            };

            const ListManager = ({ items, field, subField = null, placeholder, title }) => {
                const [localInput, setLocalInput] = React.useState('');

                const handleAddItem = () => {
                    if (!localInput.trim()) return;
                    addItem(field, subField, localInput);
                    setLocalInput('');
                };

                return (
                    <div className="space-y-3">
                        <h4 className="font-medium text-gray-700">{title}</h4>
                        <div className="space-y-2">
                            {items.map((item, index) => (
                                <div key={index} className="flex items-center gap-2 p-3 bg-gray-50 rounded-lg">
                                    <span className="flex-1">{item}</span>
                                    <button
                                        onClick={() => removeItem(field, index, subField)}
                                        className="p-2 text-red-600 hover:bg-red-100 rounded transition-colors"
                                        title="Eliminar elemento"
                                    >
                                        <Trash2 />
                                    </button>
                                </div>
                            ))}
                        </div>
                        <div className="flex gap-2">
                            <input
                                type="text"
                                value={localInput}
                                onChange={(e) => setLocalInput(e.target.value)}
                                placeholder={placeholder}
                                className="flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                onKeyPress={(e) => e.key === 'Enter' && handleAddItem()}
                            />
                            <button
                                onClick={handleAddItem}
                                className="px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2"
                            >
                                <Plus />
                                Agregar
                            </button>
                        </div>
                    </div>
                );
            };

            // Función para descargar como imagen PNG
            const downloadAsImage = () => {
                try {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');

                    canvas.width = 1400;
                    canvas.height = 2000;

                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);

                    let y = 60;
                    const margin = 50;
                    const lineHeight = 25;
                    const sectionSpacing = 40;

                    const writeText = (text, x, startY, maxWidth, fontSize = 14, color = '#000000', isBold = false) => {
                        ctx.fillStyle = color;
                        ctx.font = `${isBold ? 'bold ' : ''}${fontSize}px Arial, sans-serif`;

                        if (!text || text.trim() === '') {
                            ctx.fillText('No definido', x, startY);
                            return startY + lineHeight;
                        }

                        const words = text.split(' ');
                        let line = '';
                        let currentY = startY;

                        for (let word of words) {
                            const testLine = line + word + ' ';
                            const metrics = ctx.measureText(testLine);

                            if (metrics.width > maxWidth && line !== '') {
                                ctx.fillText(line.trim(), x, currentY);
                                currentY += lineHeight;
                                line = word + ' ';
                            } else {
                                line = testLine;
                            }
                        }

                        if (line.trim() !== '') {
                            ctx.fillText(line.trim(), x, currentY);
                            currentY += lineHeight;
                        }

                        return currentY;
                    };

                    const writeList = (items, x, startY, maxWidth, fontSize = 14) => {
                        let currentY = startY;

                        if (!items || items.length === 0) {
                            ctx.fillStyle = '#666666';
                            ctx.font = `${fontSize}px Arial, sans-serif`;
                            ctx.fillText('• No definidos', x, currentY);
                            return currentY + lineHeight;
                        }

                        for (let item of items) {
                            if (item && item.trim() !== '') {
                                currentY = writeText(`• ${item}`, x, currentY, maxWidth, fontSize, '#333333');
                            }
                        }

                        return currentY;
                    };

                    const drawSection = (title, content, color) => {
                        y = writeText(title, margin, y, canvas.width - 2 * margin, 18, color, true);
                        y += 10;
                        if (Array.isArray(content)) {
                            y = writeList(content, margin + 20, y, canvas.width - 2 * margin - 20);
                        } else {
                            y = writeText(content, margin + 20, y, canvas.width - 2 * margin - 20);
                        }
                        y += sectionSpacing;
                    };

                    y = writeText('TEORÍA DE CAMBIO', margin, y, canvas.width - 2 * margin, 32, '#1f2937', true);
                    y += sectionSpacing;

                    ctx.strokeStyle = '#cccccc';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(margin, y);
                    ctx.lineTo(canvas.width - margin, y);
                    ctx.stroke();
                    y += sectionSpacing;

                    drawSection('PROBLEMA IDENTIFICADO', theoryData.problemDefinition, '#dc2626');
                    drawSection('META A LARGO PLAZO', theoryData.longTermGoal, '#059669');
                    drawSection('STAKEHOLDERS', theoryData.stakeholders, '#2563eb');
                    drawSection('ACTIVIDADES PRINCIPALES', theoryData.activities, '#7c3aed');
                    drawSection('INSUMOS Y RECURSOS', theoryData.inputs, '#f59e0b');
                    drawSection('RESULTADOS A CORTO PLAZO', theoryData.outcomes.shortTerm, '#10b981');
                    drawSection('RESULTADOS A MEDIANO PLAZO', theoryData.outcomes.mediumTerm, '#34d399');
                    drawSection('RESULTADOS A LARGO PLAZO', theoryData.outcomes.longTerm, '#6ee7b7');
                    drawSection('SUPUESTOS CRÍTICOS', theoryData.assumptions, '#eab308');
                    drawSection('RIESGOS POTENCIALES', theoryData.risks, '#ef4444');
                    drawSection('INDICADORES', theoryData.indicators, '#6b7280');

                    ctx.strokeStyle = '#cccccc';
                    ctx.lineWidth = 1;
                    ctx.beginPath();
                    ctx.moveTo(margin, y);
                    ctx.lineTo(canvas.width - margin, y);
                    ctx.stroke();
                    y += 30;

                    writeText('Creado por Chingos de impacto® 2025', margin, y, canvas.width - 2 * margin, 12, '#9ca3af');

                    const link = document.createElement('a');
                    link.download = 'teoria-de-cambio.png';
                    link.href = canvas.toDataURL('image/png');

                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);

                } catch (error) {
                    alert('Error al generar la imagen. Intenta de nuevo.');
                }
            };

            const renderStepContent = () => {
                switch (currentStep) {
                    case 0:
                        return (
                            <div className="space-y-6">
                                <div>
                                    <h3 className="text-xl font-semibold mb-4 text-gray-800">Definición del Problema</h3>
                                    <p className="text-gray-600 mb-4">
                                        Describe claramente el problema social, ambiental o de desarrollo que tu proyecto busca resolver.
                                        Sé específico sobre quién se ve afectado y por qué es importante abordar este problema.
                                    </p>
                                    <textarea
                                        value={theoryData.problemDefinition}
                                        onChange={(e) => setTheoryData(prev => ({ ...prev, problemDefinition: e.target.value }))}
                                        placeholder="Ejemplo: La falta de acceso a educación de calidad en comunidades rurales limita las oportunidades de desarrollo económico y perpetúa los ciclos de pobreza..."
                                        className="w-full h-32 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                </div>
                            </div>
                        );

                    case 1:
                        return (
                            <div className="space-y-6">
                                <div>
                                    <h3 className="text-xl font-semibold mb-4 text-gray-800">Meta a Largo Plazo</h3>
                                    <p className="text-gray-600 mb-4">
                                        Define el cambio final y sostenible que quieres lograr. Esta meta debe ser ambiciosa pero alcanzable,
                                        y debe abordar directamente el problema que identificaste.
                                    </p>
                                    <textarea
                                        value={theoryData.longTermGoal}
                                        onChange={(e) => setTheoryData(prev => ({ ...prev, longTermGoal: e.target.value }))}
                                        placeholder="Ejemplo: Las comunidades rurales tienen acceso equitativo a educación de calidad que les permite desarrollar capacidades para mejorar sus condiciones de vida..."
                                        className="w-full h-32 p-4 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    />
                                </div>
                            </div>
                        );

                    case 2:
                        return (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold mb-4 text-gray-800">Actores Clave</h3>
                                <p className="text-gray-600 mb-6">
                                    Identifica a todos los stakeholders relevantes: beneficiarios directos e indirectos,
                                    implementadores, financiadores, y otros actores que pueden influir en el éxito del proyecto.
                                </p>
                                <ListManager
                                    items={theoryData.stakeholders}
                                    field="stakeholders"
                                    placeholder="Ej: Estudiantes de comunidades rurales, maestros locales, autoridades educativas..."
                                    title="Stakeholders y Beneficiarios"
                                />
                            </div>
                        );

                    case 3:
                        return (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold mb-4 text-gray-800">Resultados Esperados</h3>
                                <p className="text-gray-600 mb-6">
                                    Define los cambios que esperas ver en diferentes horizontes temporales.
                                    Cada nivel debe construir sobre el anterior hacia tu meta final.
                                </p>
                                <div className="grid gap-6">
                                    <ListManager
                                        items={theoryData.outcomes.shortTerm}
                                        field="outcomes"
                                        subField="shortTerm"
                                        placeholder="Ej: Maestros capacitados en nuevas metodologías pedagógicas"
                                        title="Resultados a Corto Plazo (6-12 meses)"
                                    />
                                    <ListManager
                                        items={theoryData.outcomes.mediumTerm}
                                        field="outcomes"
                                        subField="mediumTerm"
                                        placeholder="Ej: Mejora en los indicadores de aprendizaje de los estudiantes"
                                        title="Resultados a Mediano Plazo (1-3 años)"
                                    />
                                    <ListManager
                                        items={theoryData.outcomes.longTerm}
                                        field="outcomes"
                                        subField="longTerm"
                                        placeholder="Ej: Aumento en las oportunidades de empleo y emprendimiento local"
                                        title="Resultados a Largo Plazo (3+ años)"
                                    />
                                </div>
                            </div>
                        );

                    case 4:
                        return (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold mb-4 text-gray-800">Actividades e Insumos</h3>
                                <p className="text-gray-600 mb-6">
                                    Planifica las acciones concretas que realizarás y los recursos que necesitarás
                                    para lograr los resultados esperados.
                                </p>
                                <div className="grid gap-6">
                                    <ListManager
                                        items={theoryData.activities}
                                        field="activities"
                                        placeholder="Ej: Talleres de capacitación docente, desarrollo de materiales educativos"
                                        title="Actividades Principales"
                                    />
                                    <ListManager
                                        items={theoryData.inputs}
                                        field="inputs"
                                        placeholder="Ej: Presupuesto para capacitaciones, equipos tecnológicos, personal especializado"
                                        title="Insumos y Recursos Necesarios"
                                    />
                                </div>
                            </div>
                        );

                    case 5:
                        return (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold mb-4 text-gray-800">Supuestos y Riesgos</h3>
                                <p className="text-gray-600 mb-6">
                                    Identifica las condiciones externas que deben cumplirse para que tu teoría funcione,
                                    así como los riesgos que podrían afectar el logro de los resultados.
                                </p>
                                <div className="grid gap-6">
                                    <ListManager
                                        items={theoryData.assumptions}
                                        field="assumptions"
                                        placeholder="Ej: Las autoridades locales apoyan la iniciativa educativa"
                                        title="Supuestos Críticos"
                                    />
                                    <ListManager
                                        items={theoryData.risks}
                                        field="risks"
                                        placeholder="Ej: Cambios en políticas educativas nacionales que afecten el proyecto"
                                        title="Riesgos Potenciales"
                                    />
                                </div>
                            </div>
                        );

                    case 6:
                        return (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold mb-4 text-gray-800">Indicadores de Medición</h3>
                                <p className="text-gray-600 mb-6">
                                    Define cómo medirás el progreso hacia cada resultado.
                                    Los indicadores deben ser específicos, medibles y relevantes.
                                </p>
                                <ListManager
                                    items={theoryData.indicators}
                                    field="indicators"
                                    placeholder="Ej: % de mejora en pruebas de comprensión lectora, número de maestros certificados"
                                    title="Indicadores de Impacto y Resultado"
                                />
                            </div>
                        );

                    case 7:
                        return (
                            <div className="space-y-6">
                                <h3 className="text-xl font-semibold mb-4 text-gray-800">Tu Teoría de Cambio</h3>
                                <div id="theory-summary" className="bg-gray-50 p-6 rounded-lg space-y-6">

                                    <div className="bg-white p-4 rounded-lg border-l-4 border-red-500">
                                        <h4 className="font-semibold text-red-700 mb-2">Problema Identificado</h4>
                                        <p className="text-gray-700">{theoryData.problemDefinition || 'No definido'}</p>
                                    </div>

                                    <div className="bg-white p-4 rounded-lg border-l-4 border-green-500">
                                        <h4 className="font-semibold text-green-700 mb-2">Meta a Largo Plazo</h4>
                                        <p className="text-gray-700">{theoryData.longTermGoal || 'No definida'}</p>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div className="bg-white p-4 rounded-lg border-l-4 border-blue-500">
                                            <h4 className="font-semibold text-blue-700 mb-2">Stakeholders</h4>
                                            <ul className="text-sm text-gray-700 space-y-1">
                                                {theoryData.stakeholders.length > 0 ? theoryData.stakeholders.map((item, i) => (
                                                    <li key={i}>• {item}</li>
                                                )) : <li>No definidos</li>}
                                            </ul>
                                        </div>

                                        <div className="bg-white p-4 rounded-lg border-l-4 border-purple-500">
                                            <h4 className="font-semibold text-purple-700 mb-2">Actividades Clave</h4>
                                            <ul className="text-sm text-gray-700 space-y-1">
                                                {theoryData.activities.length > 0 ? theoryData.activities.map((item, i) => (
                                                    <li key={i}>• {item}</li>
                                                )) : <li>No definidas</li>}
                                            </ul>
                                        </div>
                                    </div>

                                    <div className="bg-white p-4 rounded-lg border-l-4 border-orange-500">
                                        <h4 className="font-semibold text-orange-700 mb-2">Cadena de Resultados</h4>
                                        <div className="grid md:grid-cols-3 gap-4 mt-3">
                                            <div>
                                                <h5 className="font-medium text-sm text-gray-600 mb-2">Corto Plazo</h5>
                                                <ul className="text-sm text-gray-700 space-y-1">
                                                    {theoryData.outcomes.shortTerm.length > 0 ? theoryData.outcomes.shortTerm.map((item, i) => (
                                                        <li key={i}>• {item}</li>
                                                    )) : <li>No definidos</li>}
                                                </ul>
                                            </div>
                                            <div>
                                                <h5 className="font-medium text-sm text-gray-600 mb-2">Mediano Plazo</h5>
                                                <ul className="text-sm text-gray-700 space-y-1">
                                                    {theoryData.outcomes.mediumTerm.length > 0 ? theoryData.outcomes.mediumTerm.map((item, i) => (
                                                        <li key={i}>• {item}</li>
                                                    )) : <li>No definidos</li>}
                                                </ul>
                                            </div>
                                            <div>
                                                <h5 className="font-medium text-sm text-gray-600 mb-2">Largo Plazo</h5>
                                                <ul className="text-sm text-gray-700 space-y-1">
                                                    {theoryData.outcomes.longTerm.length > 0 ? theoryData.outcomes.longTerm.map((item, i) => (
                                                        <li key={i}>• {item}</li>
                                                    )) : <li>No definidos</li>}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div className="bg-white p-4 rounded-lg border-l-4 border-yellow-500">
                                            <h4 className="font-semibold text-yellow-700 mb-2">Insumos y Recursos</h4>
                                            <ul className="text-sm text-gray-700 space-y-1">
                                                {theoryData.inputs.length > 0 ? theoryData.inputs.map((item, i) => (
                                                    <li key={i}>• {item}</li>
                                                )) : <li>No definidos</li>}
                                            </ul>
                                        </div>

                                        <div className="bg-white p-4 rounded-lg border-l-4 border-pink-500">
                                            <h4 className="font-semibold text-pink-700 mb-2">Supuestos Críticos</h4>
                                            <ul className="text-sm text-gray-700 space-y-1">
                                                {theoryData.assumptions.length > 0 ? theoryData.assumptions.map((item, i) => (
                                                    <li key={i}>• {item}</li>
                                                )) : <li>No definidos</li>}
                                            </ul>
                                        </div>
                                    </div>

                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div className="bg-white p-4 rounded-lg border-l-4 border-red-400">
                                            <h4 className="font-semibold text-red-600 mb-2">Riesgos Potenciales</h4>
                                            <ul className="text-sm text-gray-700 space-y-1">
                                                {theoryData.risks.length > 0 ? theoryData.risks.map((item, i) => (
                                                    <li key={i}>• {item}</li>
                                                )) : <li>No definidos</li>}
                                            </ul>
                                        </div>

                                        <div className="bg-white p-4 rounded-lg border-l-4 border-gray-500">
                                            <h4 className="font-semibold text-gray-700 mb-2">Indicadores Clave</h4>
                                            <ul className="text-sm text-gray-700 space-y-1">
                                                {theoryData.indicators.length > 0 ? theoryData.indicators.map((item, i) => (
                                                    <li key={i}>• {item}</li>
                                                )) : <li>No definidos</li>}
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div className="flex justify-center">
                                    <button
                                        onClick={downloadAsImage}
                                        className="flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-lg font-medium transition-colors"
                                    >
                                        <Download size={20} />
                                        Descargar PNG
                                    </button>
                                </div>
                            </div>
                        );

                    default:
                        return null;
                }
            };

            return (
                <div className="max-w-4xl mx-auto p-6 bg-white min-h-screen flex flex-col">
                    <div className="flex-1">
                        <div className="mb-8">
                            <h1 className="text-3xl font-bold text-gray-900 mb-2">Generador de Teoría de Cambio</h1>
                            <p className="text-gray-600">Herramienta interactiva para desarrollar tu teoría de cambio paso a paso</p>
                        </div>

                        {/* Progress Bar */}
                        <div className="mb-8">
                            <div className="flex items-center justify-between mb-4">
                                <span className="text-sm font-medium text-gray-700">
                                    Paso {currentStep + 1} de {steps.length}
                                </span>
                                <span className="text-sm text-gray-500">
                                    {Math.round(((currentStep + 1) / steps.length) * 100)}% completado
                                </span>
                            </div>
                            <div className="w-full bg-gray-200 rounded-full h-2">
                                <div
                                    className="bg-blue-600 h-2 rounded-full transition-all duration-300"
                                    style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
                                ></div>
                            </div>
                        </div>

                        {/* Steps Navigation */}
                        <div className="mb-8 overflow-x-auto">
                            <div className="flex space-x-4 min-w-max">
                                {steps.map((step, index) => {
                                    const Icon = step.icon;
                                    const isActive = index === currentStep;
                                    const isCompleted = index < currentStep;

                                    return (
                                        <button
                                            key={index}
                                            onClick={() => setCurrentStep(index)}
                                            className={`flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors ${
                                                isActive
                                                    ? 'bg-blue-100 text-blue-700 border-2 border-blue-200'
                                                    : isCompleted
                                                    ? 'bg-green-100 text-green-700 border-2 border-green-200'
                                                    : 'bg-gray-100 text-gray-600 border-2 border-transparent hover:bg-gray-200'
                                            }`}
                                        >
                                            <Icon />
                                            <span className="font-medium whitespace-nowrap">{step.title}</span>
                                        </button>
                                    );
                                })}
                            </div>
                        </div>

                        {/* Step Content */}
                        <div className="mb-8 min-h-96">
                            <div className="mb-4">
                                <h2 className="text-lg font-medium text-gray-800 mb-2">{steps[currentStep].title}</h2>
                                <p className="text-gray-600 text-sm">{steps[currentStep].description}</p>
                            </div>
                            {renderStepContent()}
                        </div>

                        {/* Navigation */}
                        <div className="flex justify-between">
                            <button
                                onClick={() => setCurrentStep(Math.max(0, currentStep - 1))}
                                disabled={currentStep === 0}
                                className={`flex items-center space-x-2 px-6 py-3 rounded-lg ${
                                    currentStep === 0
                                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                                        : 'bg-gray-200 text-gray-700 hover:bg-gray-300'
                                }`}
                            >
                                <ChevronLeft />
                                <span>Anterior</span>
                            </button>

                            <button
                                onClick={() => setCurrentStep(Math.min(steps.length - 1, currentStep + 1))}
                                disabled={currentStep === steps.length - 1}
                                className={`flex items-center space-x-2 px-6 py-3 rounded-lg ${
                                    currentStep === steps.length - 1
                                        ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                                        : 'bg-blue-600 text-white hover:bg-blue-700'
                                }`}
                            >
                                <span>Siguiente</span>
                                <ChevronRight />
                            </button>
                        </div>
                    </div>

                    {/* Footer */}
                    <footer className="mt-12 pt-6 border-t border-gray-200 text-center">
                        <p className="text-sm text-gray-600">
                            Creado por{' '}
                            <a
                                href="https://www.instagram.com/chingosdeimpacto/"
                                target="_blank"
                                rel="noopener noreferrer"
                                className="text-blue-600 hover:text-blue-800 font-medium"
                            >
                                Chingos de impacto®
                            </a>{' '}
                            2025.
                        </p>
                    </footer>
                </div>
            );
        };

        // Renderizar la aplicación
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(TheoryOfChangeGenerator));
    </script>
</body>
</html>
